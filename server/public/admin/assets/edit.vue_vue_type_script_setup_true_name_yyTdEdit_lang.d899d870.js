import{H as L,I,D as M,C as O,F as U}from"./element-plus.0f699047.js";import{P}from"./index.85ad53c7.js";import{r as d,t as S}from"./index.841eb249.js";import{e as j}from"./yy_qkfs.2663ea75.js";import{d as k,s as D,r as E,b as z,a0 as g,o as m,c as b,W as s,O as n,u as o,V as H,a7 as N,M as Q}from"./@vue.c3e77981.js";function ae(a){return d.get({url:"/yy_td/lists",params:a})}function W(a){return d.post({url:"/yy_td/add",params:a})}function G(a){return d.post({url:"/yy_td/edit",params:a})}function oe(a){return d.post({url:"/yy_td/delete",params:a})}function J(a){return d.get({url:"/yy_td/detail",params:a})}const K={class:"edit-popup"},X=k({name:"yyTdEdit"}),le=k({...X,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(a,{expose:v,emit:V}){const _=V,f=D(),i=D(),c=E("add"),C=z(()=>c.value=="edit"?"\u7F16\u8F91\u53D6\u6B3E\u65B9\u5F0F\u901A\u9053\u914D\u7F6E":"\u65B0\u589E\u53D6\u6B3E\u65B9\u5F0F\u901A\u9053\u914D\u7F6E"),u=g({id:"",qkfs_id:"",td_name:"",td_code:""}),F=E([]);async function q(){const t=await j({page_no:1,page_size:200});F.value=t.lists}q();const w=g({qkfs_id:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D6\u6B3E\u65B9\u5F0F\u7C7B\u578B",trigger:["blur"]}],td_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u901A\u9053\u540D\u79F0",trigger:["blur"]}],td_code:[{required:!0,message:"\u8BF7\u8F93\u5165\u901A\u9053\u7F16\u7801",trigger:["blur"]}]}),y=async t=>{for(const e in u)t[e]!=null&&t[e]!=null&&(u[e]=t[e]);u.create_time=S(u.create_time,"yyyy-mm-dd hh:MM:ss")},A=async t=>{const e=await J({id:t.id});y(e)},h=async()=>{var e,r;await((e=f.value)==null?void 0:e.validate());const t={...u};c.value=="edit"?await G(t):await W(t),(r=i.value)==null||r.close(),_("success")},T=(t="add")=>{var e;c.value=t,(e=i.value)==null||e.open()},x=()=>{_("close")};return v({open:T,setFormData:y,getDetail:A}),(t,e)=>{const r=L,R=I,p=M,B=O,Y=U;return m(),b("div",K,[s(P,{ref_key:"popupRef",ref:i,title:o(C),async:!0,width:"550px",onConfirm:h,onClose:x},{default:n(()=>[s(Y,{ref_key:"formRef",ref:f,model:o(u),"label-width":"90px",rules:o(w)},{default:n(()=>[s(p,{label:"\u53D6\u6B3E\u65B9\u5F0F\u7C7B\u578B",prop:"qkfs_id"},{default:n(()=>[s(R,{modelValue:o(u).qkfs_id,"onUpdate:modelValue":e[0]||(e[0]=l=>o(u).qkfs_id=l),placeholder:"\u8BF7\u9009\u62E9\u53D6\u6B3E\u65B9\u5F0F\u7C7B\u578B"},{default:n(()=>[(m(!0),b(H,null,N(o(F),l=>(m(),Q(r,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(p,{label:"\u901A\u9053\u540D\u79F0",prop:"td_name"},{default:n(()=>[s(B,{modelValue:o(u).td_name,"onUpdate:modelValue":e[1]||(e[1]=l=>o(u).td_name=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u901A\u9053\u540D\u79F0"},null,8,["modelValue"])]),_:1}),s(p,{label:"\u901A\u9053\u7F16\u7801",prop:"td_code"},{default:n(()=>[s(B,{modelValue:o(u).td_code,"onUpdate:modelValue":e[2]||(e[2]=l=>o(u).td_code=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u901A\u9053\u7F16\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{le as _,oe as a,ae as b};
